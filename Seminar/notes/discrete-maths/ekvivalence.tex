\subsection{Ekvivalence}
\label{ssec:ekvivalence}

Jedním speciálním typem relace na množině je tzv. \emph{ekvivalence}. Důvodem
pro tenhle název je fakt, že prvky, které jsou v relaci ekvivalence, jde za jisté
interpretace považovat za \uv{stejné}. Asi nejobyčejnější příklad užití
ekvivalence je při definici množiny racionálních čísel, $\Q$, jak si brzy
ukážeme. Nejprve ale definice ekvivalence.

\begin{definition}[Ekvivalence]
 \label{def:ekvivalence}
 Relace $R \subseteq A^2$ je
 \begin{itemize}
  \item \textbf{reflexivní}, když je každý prvek v relaci sám se sebou, tj.
   \[
    xRx \quad \forall x \in A;
   \]
  \item \textbf{symetrická}, když ke každé dvojici obsahuje i opačně
   uspořádanou, tj.
   \[
    xRy \implies yRx \quad \forall x,y \in A;
   \]
  \item \textbf{transitivní}, když ke každým dvěma dvojicím, které jdou
   \uv{slepit přes prostředníka} (vizte \hyperref[def:slozeni-relaci]{definici
   skládání}) obsahuje i tu slepenou dvojici. Formálně,
   \[
    xRy \wedge yRz \implies xRz \quad \forall x,y,z \in A.
   \]
 \end{itemize}
 Relace, která je \emph{reflexivní}, \emph{symetrická} a \emph{transitivní} se
 nazývá \textbf{ekvivalence}.
\end{definition}

Vlastnosti reflexivity, symetrie a transitivity nejsou principiálně v žádném
vztahu. Existují relace, které jsou jen reflexivní, ale nejsou ani symetrické
ani transitivní apod. Jeden příklad za všechny.

\begin{example}
 Položme $A \coloneqq \{1,2,3,4\}$. Relace
 \begin{itemize}
  \item $\{(1,1),(2,2),(3,3),(4,4),(1,2),(2,3)\}$ je reflexivní, ale nikoli
   symetrická nebo transitivní;
  \item $\{(1,1),(2,2),(1,2),(2,1),(2,3),(3,2)\}$ je symetrická, ale není
   reflexivní ani transitivní;
  \item $\{(1,2),(2,3),(1,3),(3,4),(1,4),(2,4)\}$ je transitivní, ale není
   reflexivní ani symetrická.
 \end{itemize}
\end{example}

Ekvivalence je velmi přirozený způsob, jak ztotožnit prvky, které bychom, často
z technických důvodů, nechtěli považovat za různé. Vrátím-li se k~příkladu
zlomků, asi bychom nechtěli vidět třeba $1 / 5$ a $2 / 10$ jako dva různé
zlomky. Zlomek $1 / 5$ v tomto smyslu je vlastně množina všech zlomků, které
představují stejnou hodnotu. Tuto intuici zobecňuje pojem \emph{třídy
ekvivalence}.

\begin{definition}[Třída ekvivalence]
 \label{def:trida-ekvivalence}
 Mějme ekvivalenci $R \subseteq A^2$ a prvek $x \in A$. \textbf{Třídou
 ekvivalence} prvku $x$ \textbf{vzhledem k R} myslíme množinu
 \[
  [x]_{R} \coloneqq \{y \in A \mid xRy\},
 \]
 čili množinu všech prvků, které jsou s ním v relaci $R$. Dolní index $R$
 v~zápisu $[x]_R$ budeme často vynechávat a psát jen $[x]$. Uvědomme si, že
 nezáleží na tom, jestli napíšu $xRy$ nebo $yRx$ v definici výše, protože $R$ je
 symetrická.
\end{definition}

\begin{example}[Racionální čísla]
 Symbolem $\N$ značím množinu přirozených čísel $\{1,2,3,\ldots\}$ a symbolem
 $\Z$ množinu celých čísel, tj. množinu přirozených čísel, čísel k nim opačných
 a $0$.

 Racionální čísla se dají definovat jako všechny možné podíly celého čísla
 přirozeným. Když si zlomek $a / b$, kde  $a \in \Z$ a $b \in \N$ představím
 jako uspořádanou dvojici $(a,b)$, tj. (čitatel, jmenovatel), pak množina
 \[
  A \coloneqq \{(a,b) \mid a \in \Z, b \in \N\}
 \]
 je množina všech zlomků.

 Ujasníme si, kdy dva zlomky považujeme za stejné. Snadno úpravou člověk
 dostane, že
 \[
  \frac{a}{b} = \frac{c}{d} \iff ad = bc,
 \]
 což nám dává návod, jak definovat ekvivalenci na množině všech zlom\-ků, $A$.
 Relaci $R \subseteq A^2$ definujeme tím způsobem, že $(a,b)R(c,d)$ právě tehdy,
 když $ad = bc$. Správně bychom měli dokázat, že to je opravdu ekvivalence, ale
 tím se nehodláme zdržovat.

 Množina racionálních čísel, na kterou jste zvyklí, se pak nejelegantněji
 definuje jako množina tříd ekvivalence prvků z $A$ vzhledem k $R$. Konkrétně,
 \[
  \Q \coloneqq \{[(a, b)]_R \mid a \in \Z,b \in \N\}.
 \]
\end{example}

Třídy ekvivalence jistým způsobem \uv{parcelují} množinu $A$ na disjunktní
(mající prázdný průnik) množiny. To je obsahem následujícího tvrzení, jehož
důkaz je cvičení.

\begin{claim}[Vlastnosti tříd ekvivalence]
 \label{claim:vlastnosti-trid-ekvivalence}
 Nechť $A$ je libovolná množina a $R$ je ekvivalence na $A$. Pak
 \begin{enumerate}
  \item $[x] \neq \emptyset$ pro všechna $x \in A$,
  \item Buď $[x] = [y]$, nebo $[x] \cap [y] = \emptyset$ pro všechna $x,y \in
   A$.
 \end{enumerate}
\end{claim}
\begin{proof}
 Cvičení.
\end{proof}

\begin{example}
 Řekněme, že $A$ je naše oblíbená množina $\{1,2,3,4\}$. Snadno ověříme, že
 \[
  R \coloneqq \{(1,1),(1,2),(1,4),(2,1),(2,2),(2,4),(3,3),(4,1),(4,2),(4,4)\}
 \]
 je ekvivalence na $A$. Její mříž vidíte na
 \hyperref[fig:mriz-ekvivalence]{obrázku~\ref*{fig:mriz-ekvivalence}}.
 \begin{figure}[H]
  \centering
  \begin{tikzpicture}
   \node at (-0.75,0) {$\clr{1}$};
   \node at (-0.75,1) {$\clr{2}$};
   \node at (-0.75,2) {$\clr{3}$};
   \node at (-0.75,3) {$\clr{4}$};

   \node at (0,-0.75) {$\clr{1}$};
   \node at (1,-0.75) {$\clr{2}$};
   \node at (2,-0.75) {$\clr{3}$};
   \node at (3,-0.75) {$\clr{4}$};

   \foreach \x in {0,1,2,3}{
    \foreach \y in {0,1,2,3}{
     \node[circle,draw,fill=black,minimum size=2mm,inner sep=0pt,outer
     sep=0pt] at (\x, \y) {};
    }
   }

   \foreach \x in {0, 1, 3} {
    \foreach \y in {0, 1, 3} {
     \node[circle,draw=mygreen,thick] at (\x, \y) {};
     \node[circle,draw=mygreen,thick] at (\y, \x) {};
    }
   }
   \node[circle,draw=mygreen,thick] at (2, 2) {};
  \end{tikzpicture}
  \caption{Mříž ekvivalence $\clg{R}$ na množině $\clr{A}$.}
  \label{fig:mriz-ekvivalence}
 \end{figure}
 Obecně, mříž každé ekvivalence má zaplněnou diagonálu z levého dolního rohu do
 pravého horního (kvůli reflexivitě) a je symetrická podle této diagonály (kvůli
 symetrii). Jak na první pohled poznat transitivitu nevím.

 Všimněme si, že $1R2$ a $1R4$, takže $2 \in [1]$ a $4 \in [1]$. Podle
 \hyperref[claim:vlastnosti-trid-ekvivalence]{tvrzení nahoře} je $[1] = [2] =
 [4]$, protože tyto třídy ekvivalence nejsou disjunktní. Naopak, třída $[3]$
 \textbf{je} disjunktní s každou z nich. Můžeme proto rozdělit množinu $A$ na
 třídy ekvivalence třeba jako $A = [1] \cup [3]$. Náhled na
 \hyperref[fig:rozdeleni-na-tridy]{obrázku~\ref*{fig:rozdeleni-na-tridy}}.
 \begin{figure}[H]
  \centering
  \begin{tikzpicture}
   \node[rectangle,draw=myred,thick,minimum height=2cm,minimum width=6cm] (rect)
   at (0,0) {};
   \node[above=2mm of rect] {$\clr{A}$};
   \draw[thick] (1.5, 1) -- (1.5, -1);

   \node at (-0.75, 0) {$\clg{[1] = [2] = [4]}$}; 
   \node at (2.25, 0) {$\clg{[3]}$}; 
  \end{tikzpicture}
  \caption{Množina $\clr{A}$ rozdělená na třídy ekvivalence $\clg{R}$.}
  \label{fig:rozdeleni-na-tridy}
 \end{figure}
\end{example}

Pár cvičení nakonec.

\begin{exercise}
 Dokažte
 \hyperref[claim:vlastnosti-trid-ekvivalence]{Tvrzení~\ref*{claim:vlastnosti-trid-ekvivalence}}.
\end{exercise}

\begin{exercise}[Skládání relací vs. transitivita]
 Dokažte, že relace (ne nutně ekvivalence!) $R$ je transitivní, právě tehdy když
 $R \circ R \subseteq R$.

 \textbf{Pozor!} Píšeme \uv{právě tehdy, když}, tedy se jedná o (logickou)
 ekvivalenci. Je třeba dokázat, že když $R \circ R \subseteq R$, pak $R$ je
 transitivní, a že když je $R$ transitivní, pak $R \circ R \subseteq R$.
\end{exercise}
