\section{Základní poznatky o derivaci}
\label{sec:zakladni-poznatky-o-derivaci}

Tato sekce shrnuje základní tvrzení, která činí z výpočtu derivací překvapivě
silně algoritmický proces, přirozeně za předpokladu znalosti derivací jistých
\uv{běžných} funkcí.

Začneme tím, jak se derivace chová vzhledem ke součtu, součinu a podílu funkcí.

\begin{theorem}{Aritmetika derivací}{aritmetika-derivaci}
 Ať $f,g:M \to \R$ jsou reálné funkce a $a \in M$. Pak platí
 \begin{enumerate}
  \item $(f + g)'(a) = f'(a) + g'(a)$, dává-li pravá strana smysl;
  \item $(f \cdot g)'(a) = f'(a)g(a) + f(a)g'(a)$, dává-li pravá strana smysl,
   $g$ je spojitá v $a$ platí $g(a) \neq 0$;
  \item $(f / g)'(a) = \frac{f'(a)g(a) - f(a)g'(a)}{g^2(a)}$, dává-li pravá
   strana smysl a $f / g$ je spojitá v $a$.
 \end{enumerate}
\end{theorem}
\begin{thmproof}
 Podobně jako tomu bylo i v případě \hyperref[thm:aritmetika-limit]{věty o
 aritmetice limit}, je důkaz tohoto tvrzení zdlouhavý a výpočetní. Důkaz bodu
 (1) je triviální a bodu (2) snadný; jsou pročež přenechány čtenáři. Dokážeme
 bod (3).

 Protože $f / g$ je z předpokladu spojitá v $a$, nalezneme $\delta>0$ takové, že
 $g$ je nenulová na $B(a,\delta)$. Pro $x \in B(a,\delta)$ počítáme
 \begin{align*}
  \frac{f(x)}{g(x)} - \frac{f(a)}{g(a)} &= \frac{f(x)g(a) -
  f(a)g(x)}{g(x)g(a)}\\
                                        &= \frac{f(x)g(a) - f(a)g(a) + f(a)g(a)
                                        - f(a)g(x)}{g(x)g(a)}\\
                                        &= \frac{1}{g(x)g(a)}\left( (f(x) -
                                        f(a))g(a) - f(a)(g(x) - g(a)) \right).
 \end{align*}
 Pak
 \begin{align*}
  \left( \frac{f}{g} \right)'(a) &= \lim_{x \to a} \frac{1}{x-a}\left(
  \frac{f(x)}{g(x)} - \frac{f(a)}{g(a)} \right)\\
                                 &= \lim_{x \to a} \frac{1}{g(x)g(a)}\left(
                                 \frac{f(x) - f(a)}{x-a}g(a) - f(a) \frac{g(x) -
                                g(a)}{x-a} \right)\\
                                 &= \lim_{x \to a} \frac{1}{g(x)g(a)}\left(
                                 \lim_{x \to a} \frac{f(x) - f(a)}{x-a}g(a) -
                                \lim_{x \to a} f(a) \frac{g(x) - g(a)}{x-a}
                               \right)\\
                                 &= \frac{1}{g^2(a)}\left( f'(a)g(a) - f(a)g'(a)
                                 \right),
 \end{align*}
 čímž je důkaz hotov.
\end{thmproof}

\begin{exercise}{}{aritmetika-derivaci}
 Dokažte body (1) a (2) ve \myref{větě}{thm:aritmetika-derivaci}.
\end{exercise}

\begin{theorem}{Derivace inverzní funkce}{derivace-inverzni-funkce}
 Ať $I \subseteq \R$ je interval a $f:I \to \R$ je spojitá a rostoucí či
 klesající na $I$. Pak pro bod $a$ ve vnitřku $I$ platí:
 \begin{enumerate}
  \item Je-li $f'(a) \neq 0$, potom $(f^{-1})'(f(a)) = 1 / f'(a)$;
  \item je-li $f'(a) = 0$, potom $(f^{-1})'(f(a)) = \infty$, když $f$ je
   rostoucí, a $f^{-1}(f'(a)) = -\infty$, když $f$ je klesající.
 \end{enumerate}
\end{theorem}

\begin{thmproof}
 Předpokládejme, že $f$ je rostoucí. Pro klesající funkci lze důkaz vést
 obdobně.

 Protože $f$ je spojitá, je z \hyperref[thm:bolzanova]{Bolzanovy věty} $J
 \coloneqq f(I)$ interval. Dále, ježto $a$ leží ve vnitřku $I$, leží rovněž
 $f(a)$ ve vnitřku $J$. Existuje pročež $\varepsilon>0$ takové, že
 $B(f(a),\varepsilon) \subseteq J$. Dále, $f$ je rostoucí, tedy speciálně
 prostá, takže existuje $f^{-1}:J \to I$, která je (ze spojitosti $f$) rovněž
 spojitá.

 Volme nyní $\delta>0$ tak, aby $f(B(a,\delta)) \subseteq B(f(a),\varepsilon)$ a
 pro $x \in B(a,\delta)$ definujme
 \[
  \varphi(x) \coloneqq \frac{f(x) - f(a)}{x - a}.
 \]
 Pak přirozeně $\lim_{x \to a} \varphi(x) = f'(a)$. Díky prostotě $f^{-1}$ na
 $B(f(a),\varepsilon)$ lze díky \hyperref[thm:limita-slozene-funkce]{větě o
 limitě složené funkce} počítat
 \begin{equation}
  \label{eq:derivace-inverzu}
  \tag{$\heartsuit$}
  \begin{split}
   f'(a) &= \lim_{x \to a} \varphi(x) = \lim_{y \to f(a)} (\varphi \circ
   f^{-1})(y)\\
         &= \lim_{y \to f(a)} \frac{f(f^{-1}(y)) - f(a)}{f^{-1}(y) - a} = \lim_{y
         \to f(a)} \frac{y - f(a)}{f^{-1}(y) - a}.
  \end{split}
 \end{equation}
 Předpokládejme nejprve, že $f'(a) \neq 0$. Pak z
 \hyperref[thm:aritmetika-limit-funkci]{věty o aritmetice limit} platí
 \[
  \frac{1}{f'(a)} = \lim_{y \to f(a)} \frac{f^{-1}(y) - a}{y - f(a)} = \lim_{y
  \to f(a)} \frac{f^{-1}(y) - f^{-1}(f(a))}{y - f(a)} = (f^{-1})'(f(a)).
 \]
 
 Nyní ať $f'(a) = 0$. Pak díky~\eqref{eq:derivace-inverzu} máme
 \[
  \lim_{y \to f(a)} \frac{y-f(a)}{f^{-1}(y) - a} = \lim_{y \to f(a)}
  \frac{y-f(a)}{f^{-1}(y) - f^{-1}(f(a))} = 0.
 \]
 Funkce
 \[
  \psi(y) \coloneqq \frac{y-f(a)}{f^{-1}(y) - f^{-1}(f(a))}
 \]
 je na okolí $R(f(a),\varepsilon)$ kladná, neboť $f^{-1}$ je rostoucí -- a tedy
 $y - f(a) > 0 \Leftrightarrow f^{-1}(y) - f^{-1}(f(a)) > 0$. Podle
 \myref{tvrzení}{prop:limita-a/0} platí
 \[
  (f^{-1})'(f(a)) = \lim_{y \to f(a)} \frac{f^{-1}(y) - f^{-1}(f(a))}{y - f(a)}
  = \lim_{y \to f(a)} \frac{1}{\psi(y)} = \infty,
 \]
 což zakončuje důkaz.
\end{thmproof}

\begin{problem}{}{derivace-odmocniny}
 Dokažte, že derivací funkce $x \mapsto \sqrt[n]{x}$ na intervalu $(0,\infty)$
 je $x \mapsto \sqrt[n]{x} / nx$, kde $\N \ni n \geq 1$.
\end{problem}
\begin{probsol}
 Funkce $f(x) = \sqrt[n]{x}$ je jistě spojitá a rostoucí na $(0,\infty)$. Její
 inverzní funkcí je rovněž rostoucí a spojitá $f^{-1}(y) = y^{n}$, jejíž
 derivací je $(f^{-1})'(y) = ny^{n-1}$. Podle
 \hyperref[thm:derivace-inverzni-funkce]{věty o derivaci inverzní funkce} platí
 pro $x \in (0,\infty)$
 \[
  f'(x) = \frac{1}{(f^{-1})'(f(x))} = \frac{1}{n f^{n-1}(x)} = \frac{1}{n
  (\sqrt[n]{x})^{n-1}} = \frac{\sqrt[n]{x}}{nx},
 \]
 jak jsme chtěli.
\end{probsol}

Sekci zakončíme vztahem derivaci k extrémům původní funkce, který hraje stěžejní
roli mimo jiné v optimalizačních problémech, bo často vedou na hledání
minima/maxima jisté funkce.

\begin{proposition}{Vztah derivace a extrému}{vztah-derivace-a-extremu}
 Ať $f:M \to \R$ má v $a \in M$ lokální extrém. Pak $f'(a)$ buď neexistuje, nebo
 je nulová.
\end{proposition}
\begin{propproof}
 Dokážeme kontrapozitivní formu tvrzení. Budeme předpokládat, že $f'(a)$
 existuje a je různá od nuly. Z toho odvodíme, že $f$ nemá v $a$ lokální extrém.

 Ať nejprve $f'(a) > 0$. Pak existuje okolí $R(a,\delta)$, na němž platí
 \[
  \frac{f(x) - f(a)}{x - a} > 0.
 \]
 Odtud plyne, že $f(x) < f(a)$ pro $x \in (a - \delta,a)$ a $f(x) > f(a)$ pro $x
 \in (a,a+\delta)$, čili $f$ nemá v~$a$ lokální extrém. Případ $f'(a) < 0$ se
 ošetří obdobně.
\end{propproof}

\begin{warning}{}{extremy-funkce}
 Radíme čtenářům, by sobě všimli, že
 \hyperref[prop:vztah-derivace-a-extremu]{předchozí tvrzení} je ve formě
 \emph{implikace}. Tedy, \textbf{má-li} funkce $f$ v bodě $a$ \textbf{extrém,
 pak} $f'(a) = 0$, nebo tato neexistuje. Rovnost $f'(a) = 0$ ani neexistence
 derivace v bodě $a$ ještě nezaručují, že $f$ má v bodě $a$ jakýkoli extrém.

 Jako protipříklad stačí jednoduchá funkce $f(x) = x^3$. Zřejmě $f'(x) = 3x^2$,
 která je rovna $0$ pro $x = 0$, ale $x^3$ nemá v $0$ ani lokální extrém.
\end{warning}

\begin{exercise}{}{extremy-funkce}
 Nalezněte lokální i globální extrémy funkce $f(x) = 2 x^{3} - 3 x^{2} - 12 x -
 4$.
\end{exercise}
