\section{Poznatky o limitách posloupností}
\label{sec:poznatky-o-limitach-posloupnosti}

Účelem této sekce je shrnout základní poznatky o limitách posloupností, jež
umožní čtenářům limity konkrétních posloupností efektivně počítat a navíc
široké jejich použití v následujících kapitolách.

Začneme jedním z nejdůležitějších a dle našeho názoru též nejkrásnějších
výsledků -- tzv. Bolzano\-vou-Weierstraßovou větou. Ta tvrdí v podstatě toto:
mám-li omezenou posloupnost, pak z ní již umím vybrat nekonečně mnoho prvků,
které tvoří posloupnost \emph{konvergentní}.

Ona krása takového tvrzení spočívá v principu, kterým se podrobně zabývá
kombinatorická disciplína zvaná
\href{https://en.wikipedia.org/wiki/Ramsey_theory}{Ramseyho teorie}; v principu,
že v téměř libovolně chaotické struktuře lze nalézt řád, jakmile jest tato
dostatečně velká. Nejedná se jistě o čistě matematický princip, nýbrž dost možná
o princip vzniku vesmíru a života, popsaný již starým Aristotelem ve výmluvném
výroku, \uv{Celek je více než součet svých částí.} V mnoha zpytech se tomuto
jevu přezdívá
\href{https://www.sciencedirect.com/topics/computer-science/emergent-behavior}{Emergent
Behavior} a představuje stav, kdy chování systému nelze plně popsat pouze
studiem jeho jednotlivých prvků.

Pro důkaz Bolzanovy-Weierstraßovy věty potřebujeme jedné pomocné konstrukce,
tzv. \emph{systému vnořených intervalů}. Nejprve si však pořádně definujeme
samotný pojem \emph{intervalu}. K tomu se nám bude hodit rozšířit množinu
reálných čísel o prvky $-\infty$ a $\infty$.

\subsection{Rozšířená reálná osa}
\label{ssec:rozsirena-realna-osa}

\begin{definition}{Rozšířená reálná osa}{rozsirena-realna-osa}
 Definujme množinu $\R^{*} \coloneqq \R \cup \{-\infty,\infty\}$, kde $\infty$,
 resp. $-\infty$, je z definice prvek takový, že $\infty \geq x$, resp.
 $-\infty \leq x$, pro každé $x \in \R$. Množině $\R^{*}$ budeme někdy říkat
 \emph{rozšířená reálná osa}. Rozšíříme rovněž operace $+$ a $ \cdot $ na prvky
 $\infty$ a $-\infty$ následovně.
 \begin{align*}
  \infty + a = a + \infty = \infty,& \quad \text{pro }a \in \R \cup
  \{\infty\},\\
  -\infty + a = a + (-\infty) = -\infty,& \quad \text{pro }a \in \R \cup
  \{-\infty\},\\
  \infty \cdot a = a \cdot \infty = \infty,& \quad \text{pro }a > 0 \text{ nebo
  }a = \infty,\\
  \infty \cdot a = a \cdot \infty = -\infty,& \quad \text{pro }a < 0 \text{ nebo
  }a = -\infty,\\
  -\infty \cdot a = a \cdot (-\infty) = -\infty,& \quad \text{pro }a > 0 \text{
  nebo }a = \infty,\\
  -\infty \cdot a = a \cdot (-\infty) = \infty,& \quad \text{pro }a < 0 \text{
  nebo }a = -\infty,\\
  a \cdot \infty^{-1} = a \cdot (-\infty)^{-1} = 0,& \quad \text{pro }a \in \R.
 \end{align*}
\end{definition}

\begin{warning}{}{pocitacni-s-nekonecnem}
 \myref{Definice}{def:rozsirena-realna-osa} stručně řečeno říká, že se s prvky
 $\infty$ a $-\infty$ zachází podobně jako s ostatními reálnými čísly. Ovšem,
 následující operace zůstávají nedefinovány.
 \[
  \infty + (-\infty), -\infty + \infty, \pm \infty \cdot 0, 0 \cdot ( \pm
  \infty), ( \pm \infty) \cdot ( \pm \infty)^{-1}.
 \]
\end{warning}

Čtenáři možná zpozorovali, že jsme při své
\hyperref[def:limita-posloupnosti]{definici limity} nerozlišili mezi
posloupnostmi, které nemají limitu, protože jejich prvky \uv{skáčou sem a tam},
a posloupnostmi, které ji nemají naopak pro to, že \uv{stále klesají či
stoupají}. Pro další studium záhodno se tohoto nedostatku zlišit.

\begin{definition}{Limita v nekonečnu}{limita-v-nekonecnu}
 Ať $x:\N \to \R$ je reálná posloupnost. Řekneme, že $x$ má limitu $\infty$,
 resp. $-\infty$, když pro každé $K > 0, K \in \R$, existuje $n_0 \in \N$
 takové, že pro všechna $n \geq n_0$ platí $x_n > K$, resp. $x_n < -K$. Píšeme
 $\lim_{} x = \infty$, resp. $\lim_{} x = -\infty$.
\end{definition}

Na reálných číslech existuje uspořádání $ \leq $, které zdělila z čísel
přirozených, prostřednictvím čísel celých a konečně čísel racionálních. Protože,
vděkem naší konstrukci, jsou celá čísla třídy ekvivalence dvojic čísel
přirozených, čísla racionální třídy ekvivalence dvojic čísel celých a čísla
reálná limity konvergentních racionálních posloupností, bylo by vskutku obtížné
a neproduktivní vypsat konkrétní množinovou definici tohoto uspořádání na
reálných číslech. Přidržíme se pročež intuitivního pohledu na věc a důkaz, že
$ \leq $ je skutečně uspořádání na reálných číslech, necháváme laskavému čtenáři
k promyšlení.

Existence uspořádání umožňuje dívat se na množiny z jistého \uv{souvislého}
pohledu. Nemusejí již být vňaty (jako tomu je u ostatních představených
číselných okruhů) jako výčty jednotlivých prvků, ale oprávněně jako
\uv{provázky} či \uv{úsečky}. \hyperref[cor:r-jsou-uplna]{Úplnost reálných
čísel} zaručuje, že z každého reálného čísla mohu plynule dorazit do každého
jiné reálného čísla aniž reálná čísla opustím.

Předchozí odstavec vágně motivuje definici \emph{intervalu} -- \uv{souvislé}
omezené podmnožiny reálných čísel. Zároveň s definicí intervalu vzniká i pojem
\emph{otevřenosti} a \emph{uzavřenosti} podmnožiny reálných čísel -- pojem,
který je klíčem k definici \emph{topologie} na obecné množině a tím pádem
vlastně i základem tak zhruba poloviny celé moderní matematiky.

Směrem k definici intervalu učiňmež koliksi mezikroků.

\begin{definition}{Maximum a minimum}{maximum-a-minimum}
 Ať $X \subseteq \R$ je množina. Řekneme, že prvek $M \in X$, resp. $m \in X$,
 je \emph{maximem}, resp. \emph{minimem}, množiny $X$, když pro každé $x \in X$
 platí $x \leq M$, resp. $x \geq m$. Píšeme $M = \max X$, resp. $m = \min X$.
\end{definition}

\begin{definition}{Horní a dolní závora}{horni-a-dolni-zavora}
 Ať $X \subseteq \R$ je množina. Řekneme, že prvek $Z \in \R^{*}$ resp. $z \in
 \R^{*}$, je \emph{horní}, resp. \emph{dolní}, \emph{závora} množiny $X$, když
 pro každé $x \in X$ platí $x \leq Z$, resp. $x \geq z$.

 Má-li množina $X$ horní, resp. dolní, závoru, \textbf{která leží v $\R$} (tedy
 není rovna $ \pm \infty$), říkáme, že je \emph{shora}, resp. \emph{zdola},
 \emph{omezená}. Je-li navíc $X$ omezená shora i zdola, říkáme krátce, že je
 \emph{omezená}.
\end{definition}

\begin{definition}{Supremum a infimum}{supremum-a-infimum}
 Ať $X \subseteq \R$ je množina. Řekneme, že prvek $S \in \R^{*}$, resp. $i \in
 \R^{*}$, je \emph{supremum}, resp. \emph{infimum}, množiny $X$, když je to její
 \emph{nejmenší horní závora}, resp. \emph{největší dolní závora}. Píšeme $S =
 \sup X$, resp. $i = \inf X$.

 Vyjádřeno symbolicky, prvek $S \in \R$ je \emph{supremem} množiny $X$, když $x
 \leq S$ pro všechna $x \in X$, a kdykoli $x \leq Z$ pro nějaký prvek $Z \in \R$
 a všechna $x \in X$, pak $S \leq Z$. Prvek $i \in \R$ je \emph{infimem} množiny
 $X$, když $x \geq i$ pro všechna $x \in X$, a kdykoli $x \geq z$ pro nějaký
 prvek $z \in \R$ a všechna $x \in X$, pak $i \geq z$.
\end{definition}

\begin{warning}[topsep at break=0pt]{}{supremum-vs-maximum}
 Vřele radíme čtenářům, aby sobě bedlivě přečetli předchozí tři definice a
 uvědomili si -- velmi zásadní, leč lehko přehlédnuté -- jejich vzájemné
 rozdíly.
 \begin{itemize}
  \item Maximum a minimum množiny $X$ je z
   \hyperref[def:maximum-a-minimum]{definice} \textbf{vždy prvkem této množiny}.
   Maximem množiny $\{1,2,3\}$ je prvek $3$ a jeho minimem je prvek $1$.
  \item Horní, resp. dolní, závora množiny $X$ je \textbf{libovolné
   \clr{rozšířené} reálné číslo} (tedy klidně i $ \pm \infty$), které je větší,
   resp. menší, než všechny prvky $X$. Horní závorou množiny $\{1,2,3\}$ je
   číslo $69$, též $\infty$ a též číslo $3$. Horní a dolní závora \textbf{může,
   ale nemusí}, být prvkem $X$.
  \item Supremum, resp. infimum, množiny $X$ je \textbf{rozšířené reálné číslo},
   které je větší, resp. menší, než všechny prvky $X$, ale \textbf{zároveň
   menší, resp. větší, než každá jeho horní, resp. dolní, závora}. Supremum a
   infimum \textbf{může, ale nemusí, ležet v množině $X$}. Touto vlastností se
   přesně rozlišují \emph{uzavřené} a \emph{otevřené} intervaly -- interval je
   uzavřený, když jeho supremum v~něm leží, kdežto otevřený, když nikoliževěk.
   Supremem množiny $\{1,2,3\}$ je číslo $3$ a jeho infimem je číslo $1$.
 \end{itemize}
 Daná podmnožina $X \subseteq \R$ \textbf{nemusí nutně mít maximum a minimum},
 ale, a to si dokážeme, jest-li shora, resp. zdola, omezená, \textbf{pak má
 nutně supremum, resp. infimum}.
\end{warning}

\begin{exercise}{}{sup-inf-prazdne-mnoziny}
 Určete z \hyperref[def:supremum-a-infimum]{definice suprema a infima} $\inf
 \emptyset$ a $\sup \emptyset$.
\end{exercise}

\begin{exercise}{}{sup-inf-jednoznacne}
 Dokažte, že $\sup X$ a $\inf X$ jsou určeny jednoznačně.
\end{exercise}

\subsubsection{Axiomatická definice reálných čísel}
\label{sssec:axiomaticka-definice-realnych-cisel}

Přestože jsme konstrukci reálných čísel úspěšně dokončili použitím
konvergentních racionálních posloupností, stojí snad za zmínku i jejich
axiomatická definice, která se obvykle uvádí v úvodních učebnicích matematické
analýzy.

Překvapivě není v principu tak odlišná od jejich konstrukce, kromě jednoho
konkrétního axiomu, jenž právě zaručuje úplnost; není z něj však vůbec na první,
v zásadě ani na druhý, pohled vidno, že takovou vlastnost skutečně implikuje.

\begin{definition}{Axiomatická definice reálných
 čísel}{axiomaticka-definice-realnych-cisel}
 Množina $\R$ se v zásadě definuje jako nekonečné uspořádané těleso s vlastností
 úplnosti. Tedy,
 \begin{itemize}
  \item existují prvky $0,1 \in \R$ a operace $+, \cdot :\R^{2} \to \R$ s
   inverzy $-,^{-1}:\R \to \R$ takové, že
   \[
    (\R,+,-,0, \cdot ,^{-1},1)
   \]
   je nekonečné těleso;
  \item existuje uspořádání $ \leq $ na $\R$, které je lineární (každé dva prvky
   lze spolu porovnat);
  \item (\textbf{axiom úplnosti}) každá shora omezená podmnožina $\R$ má
   supremum.
 \end{itemize}
\end{definition}

Je to právě on poslední axiom v
\hyperref[def:axiomaticka-definice-realnych-cisel]{předchozí definici}, jehož
použití jsme se chtěli vyhnout, bo dohlédnout jeho hloubky je obtížné a
neintuitivní.

Dokážeme si zde ovšem, že naše \hyperref[def:realna-cisla]{definice reálných
čísel} odpovídá jejich axiomatické. Otázky nekonečnosti, podmínek tělesa i
uspořádání jsme již zodpověděli. Zbývá dokázat axiom úplnosti.

K tomu potřebujeme pouze jedno pomocné lemma a definici -- a to konkrétně
\emph{monotónní} posloupnosti. Pěstujeme víru, že ctění čtenáři se s tímto
pojmem již setkali ve spojitosti s funkcemi. Totiž \emph{monotónní}
posloupnosti jsou posloupnosti takové, že velikost jejich prvků buď klesá
(případně jen neroste), či roste (případně jen neklesá). Je přirozené myslet si,
že posloupnosti, které jsou shora omezené a rostou, musejí konvergovat. Je tomu
vskutku tak.

\begin{definition}{Monotónní posloupnost}{monotonni-posloupnost}
 O posloupnosti $x:\N \to \R$ řekneme, že je
 \begin{itemize}
  \item \emph{rostoucí}, když $x_{n+1}>x_n \; \forall n \in \N$;
  \item \emph{klesající}, když $x_{n+1} < x_n \; \forall n \in \N$;
  \item \emph{neklesající}, když $x_{n+1} \geq x_n \; \forall n \in \N$;
  \item \emph{nerostoucí}, když $x_{n+1} \leq x_n \; \forall n \in \N$.
 \end{itemize}
 Ve všech těchto případech díme, že posloupnost $x$ je \emph{monotónní}.
\end{definition}

\begin{lemma}{Limita monotónní posloupnosti}{limita-monotonni-posloupnosti}
 \vspace*{-\parskip}
 \begin{enumerate}[label=(\alph*)]
  \item Každá rostoucí nebo neklesající shora omezená posloupnost je
   konvergentní.
  \item Každá klesající nebo nerostoucí zdola omezená posloupnost je
   konvergentní.
 \end{enumerate}
\end{lemma}
\begin{lemproof}
 Dokážeme pouze část (a), část (b) je ponechána jako cvičení.

 Ať 
\end{lemproof}


\begin{proposition}{Axiom úplnosti}{axiom-uplnosti}
 Ať $X \subseteq \R$ je shora omezená množina. Pak existuje $\sup X$.
\end{proposition}
\begin{propproof}
 Ježto naše \hyperref[cor:r-jsou-uplna]{pojetí úplnosti} se překládá do znění,
 \uv{Každá konvergentní posloupnost má limitu}, není snad nečekané, že se důkaz
 \emph{axiomu úplnosti} o tuto vlastnost opírá.

 Je-li $X$ prázdná, pak má supremum podle
 \myref{cvičení}{exer:sup-inf-prazdne-mnoziny}. Ať je tedy $X$ neprázdná a shora
 omezená a $Z \in \R$ je libovolná horní závora $X$. Protože $X$ je neprázdná,
 existuje $q \in \R$ takové, že $q < x$ pro nějaké $x \in X$. Definujeme
 posloupnosti $Z_n$ a $q_n$ podle následujících pravidel.
 \begin{itemize}
  \item Položme $Z_0 \coloneqq Z$ a $q_0 \coloneqq q$.
  \item Uvažme číslo $p_n \coloneqq (Z_n + q_n) / 2$.
  \item Je-li $p_n$ horní závorou $X$, položme $Z_{n+1} \coloneqq p_n$ a
   $q_{n+1} \coloneqq q_n$.
  \item Není-li $p_n$ horní závorou $X$, položme $Z_{n+1} \coloneqq Z_n$ a
   $q_{n+1} \coloneqq p_n$.
 \end{itemize}
 Pak jsou posloupnosti $Z_n$ a $q_n$ konvergentní (\textbf{proč?}) a indukcí lze
 snadno dokázat (\textbf{dokažte!}), že $q_n$ \textbf{není} horní závorou $X$ a
 $Z_n$ \textbf{je} horní závorou $X$ pro všechna $n \in \N$. Navíc platí
 $\lim_{} |Z_n - q_n| = 0$ (\textbf{proč?}), a tedy $\lim_{} Z_n = \lim_{} q_n$.

 Označme $S \coloneqq \lim_{} Z_n = \lim_{} q_n$. Dokážeme, že $S = \sup X$. Je
 třeba ukázat, že
 \begin{enumerate}
  \item $S$ je horní závorou $X$;
  \item $S$ je nejmenší horní závorou.
 \end{enumerate}
 Předpokládejme pro spor, že existuje $x \in X$ takové, že $x > S$. To znamená,
 že existuje konstanta $c > 0$ taková, že $x - S = c$. Volme $\varepsilon
 \coloneqq c / 2$. Pro toto $\varepsilon$ z
 \hyperref[def:limita-posloupnosti]{definice limity} existuje $n_0 \in \N$
 takové, že pro všechna $n \geq n_0$ platí $|Z_n - \lim_{} Z_n| = |Z_n - S| <
 \varepsilon$. Jelikož $(Z_n)$ je nerostoucí, je absolutní hodnota v předchozím
 výrazu zbytečná a můžeme zkrátka psát $Z_n - S < \varepsilon$. Potom ale pro
 všechna $n \geq n_0$ máme
 \[
  x - Z_n = x + S - S - Z_n = (x - S) + (S - Z_n) > c - \varepsilon =
  \frac{c}{2},
 \]
 čili speciálně $x > Z_n$, což je ve sporu s volbou $Z_n$ jako horní závory $X$.
 To dokazuje (1).

 Tvrzení (2) lze dokázat obdobně, akorát využitím posloupnosti $(q_n)$ spíše než
 $(Z_n)$. Opět ať pro spor existuje $Z \in \R$, které je horní závorou $X$, a $Z
 < S$. Pak nalezneme konstantu $c > 0$ takovou, že $S - Z = c$. Opět z
 \hyperref[def:limita-posloupnosti]{definice limity} vezmeme $\varepsilon
 \coloneqq c / 2$ a k němu $n_0 \in \N$ takové, že $\forall n \geq n_0$ platí $S
 - q_n < \varepsilon$, kde absolutní hodnotu jsem mohli vynechat, bo $S \geq
 q_n$ pro 
\end{propproof}
